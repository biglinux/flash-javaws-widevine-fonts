#!/bin/bash

export TEXTDOMAINDIR="/usr/share/locale"
export TEXTDOMAIN=flash-javaws-widevine-fonts

# Import BigControlCenter base modules / Importa os módulos básicos do BigControlCenter
# That's include jquery and materialize / Isso inclui o jquery e o materialize
# http://materializecss.com/
. /usr/share/bigbashview/bcc/shell/base.sh


#Title/Description variables
bcc_title=$"Widevine, flash e fontes"
bcc_description=$""
# To disable logo use: bcc_logo="no"
bcc_logo="logo.png"

# About variables
# To disable about use: bcc_about="no"
bcc_about="yes"
bcc_about_license=$"GPL v2 or greater"
bcc_about_by=$"Bruno Gonçalves"
bcc_about_release_date=$"15/07/2019"
bcc_about_url_code=$"https://github.com/biglinux/flash-javaws-widevine-fonts"
bcc_about_url_project=$"https://www.biglinux.com.br"

# Print header in screen
bcc_header


###############
# Start Content


if [ "$install_font" = "1" ]; then
    bigsudo /usr/share/bigbashview/bcc/apps/flash-javaws-widevine-fonts/apps-manage.sh install-font
fi

if [ "$remove_font" = "1" ]; then
    bigsudo /usr/share/bigbashview/bcc/apps/flash-javaws-widevine-fonts/apps-manage.sh remove-font
fi

if [ "$install_flash" = "1" ]; then
    bigsudo /usr/share/bigbashview/bcc/apps/flash-javaws-widevine-fonts/apps-manage.sh install-flash
fi

if [ "$remove_flash" = "1" ]; then
    bigsudo /usr/share/bigbashview/bcc/apps/flash-javaws-widevine-fonts/apps-manage.sh remove-flash
fi

if [ "$remove_widevine" = "1" ]; then
    bigsudo /usr/share/bigbashview/bcc/apps/flash-javaws-widevine-fonts/apps-manage.sh remove-widevine
fi

if [ "$config_javaws" = "1" ]; then
    /usr/share/bigbashview/bcc/apps/flash-javaws-widevine-fonts/apps-manage.sh config-javaws
fi

if [ "$install_javaws" = "1" ]; then
    bigsudo /usr/share/bigbashview/bcc/apps/flash-javaws-widevine-fonts/apps-manage.sh install-javaws
fi

if [ "$install_widevine" = "1" ]; then
   /usr/share/bigbashview/bcc/apps/flash-javaws-widevine-fonts/apps-manage.sh install-widevine
fi


# Start javascript
echo '<script type="text/javascript">
function sleep (time) {
  return new Promise((resolve) => setTimeout(resolve, time));
}'

# Fix to interface don't crash
echo 'sleep(100).then(() => {'

# Redirect to another script
echo "window.location.href = \"index.sh.htm\""

# Close javascript
echo '});'
echo '</script>'


#########
# The end
echo '</body>'
